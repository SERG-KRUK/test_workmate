Описание проекта

Этот проект представляет собой инструмент для анализа лог-файлов и генерации отчетов. Основные возможности:

Чтение логов в формате JSON

Генерация отчетов:

Среднее время ответа по endpoint'ам

Статистика по User-Agent

Фильтрация логов по дате

Гибкая система отчетов через стратегии

Требования

  Python 3.9+

  Установленные зависимости:
    bash

  pip install -r requirements.txt

Установка

git clone https://github.com/SERG-KRUK/test_workmate
cd log-analyzer

Установите зависимости:
bash

  pip install -r requirements.txt

Использование
Запуск анализатора
bash

python main.py --file logs/access.log --report average

Доступные опции
text

--file        Путь к файлу(ам) логов (обязательный)
--report      Тип отчета: average (по времени ответа) или user_agent (по клиентам)
--date        Фильтр по дате в формате ГГГГ-ММ-ДД (опционально)

Примеры команд

$ python main.py --file example1.log --report average

+--------------------------+---------+----------------+
| Endpoint                 |   Count |   Average Time |
+==========================+=========+================+
| /api/challenges/...      |       1 |          0.056 |
+--------------------------+---------+----------------+
| /api/context/...         |      21 |          0.043 |
+--------------------------+---------+----------------+
| /api/homeworks/...       |      71 |          0.158 |
+--------------------------+---------+----------------+
| /api/specializations/... |       6 |          0.035 |
+--------------------------+---------+----------------+
| /api/users/...           |       1 |          0.072 |


Отчет по User-Agent за конкретную дату:

$ python main.py --file example1.log --report user_agent

+--------------+---------+
| User-Agent   |   Count |
+==============+=========+
| ...          |     100 |
+--------------+---------+

Формат логов

Программа ожидает логи в следующем формате (JSON на каждой строке):
json

{"url": "/api/users", "response_time": "0.123", "http_user_agent": "Chrome", "@timestamp": "2025-06-22T00:00:00+00:00"}

Тестирование

Проект включает unit-тесты с покрытием >85%. Для запуска тестов:
bash

pytest --cov=. --cov-report=term-missing

Тестовая статистика
________________________________________________________________________ coverage: platform win32, python 3.9.13-final-0 ________________________________________________________________________ 

Name           Stmts   Miss  Cover   Missing
--------------------------------------------
main.py           64     16    75%   20, 89-101, 141-145, 150-158, 162
test_main.py      44      0   100%
--------------------------------------------
TOTAL            108     16    85%
